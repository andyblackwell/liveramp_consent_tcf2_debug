<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        #page_wrapper {
            margin: 20px 0;
        }
        h1,
        h3 {
            margin-left: 40px;
        }
        #messages {
            font-family: monospace;
        }
        #messages li {
            margin-bottom: 20px;
        }
        #messages p {
            font-weight: bold;
            margin: 0 0 10px 0;
            cursor: pointer;
            width: fit-content;
        }
        #messages pre {
            background: rgba(0,0,0,.05);
            padding: 10px;
            margin: 0;
            width: fit-content;
        }
        @media (max-width: 600px) {
            body { font-size: 11px; }
            ol { padding-left: 30px; }
        }
        /* shove the prompt out of the way so you can see the debug output */
        .qc-cmp2-container > div {
            width: 50% !important;
            left: 50% !important;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
  <div id="page_wrapper">
      <h1>LiveRamp Privacy Manager - TCF 2.0 Testing</h1>

      <h3>Debug Messages:</h3>
      <ol id="messages">

      </ol>
  </div>

  <!-- LiveRamp cmp stub -->
  <script>
  !(function(e) {
      var t = {};

      function n(r) {
          if (t[r]) return t[r].exports;
          var a = (t[r] = {
              i: r,
              l: !1,
              exports: {}
          });
          return e[r].call(a.exports, a, a.exports, n), (a.l = !0), a.exports;
      }
      (n.m = e),
      (n.c = t),
      (n.d = function(e, t, r) {
          n.o(e, t) ||
              Object.defineProperty(e, t, {
                  enumerable: !0,
                  get: r
              });
      }),
      (n.r = function(e) {
          "undefined" != typeof Symbol &&
              Symbol.toStringTag &&
              Object.defineProperty(e, Symbol.toStringTag, {
                  value: "Module",
              }),
              Object.defineProperty(e, "__esModule", {
                  value: !0
              });
      }),
      (n.t = function(e, t) {
          if ((1 & t && (e = n(e)), 8 & t)) return e;
          if (4 & t && "object" == typeof e && e && e.__esModule) return e;
          var r = Object.create(null);
          if (
              (n.r(r),
                  Object.defineProperty(r, "default", {
                      enumerable: !0,
                      value: e,
                  }),
                  2 & t && "string" != typeof e)
          )
              for (var a in e)
                  n.d(
                      r,
                      a,
                      function(t) {
                          return e[t];
                      }.bind(null, a)
                  );
          return r;
      }),
      (n.n = function(e) {
          var t =
              e && e.__esModule ?
              function() {
                  return e.default;
              } :
              function() {
                  return e;
              };
          return n.d(t, "a", t), t;
      }),
      (n.o = function(e, t) {
          return Object.prototype.hasOwnProperty.call(e, t);
      }),
      (n.p = "https://gdpr.privacymanager.io/1.0.5/"),
      n((n.s = 38));
  })({
      38: function(e, t) {
          !(function() {
              if ("function" != typeof window.__tcfapi) {
                  var e,
                      t = [],
                      n = window,
                      r = n.document,
                      a = n.__tcfapi ? n.__tcfapi.start : function() {};
                  !n.__tcfapi &&
                      (function e() {
                          var t = !!n.frames.__tcfapiLocator;
                          if (!t)
                              if (r.body) {
                                  var a = r.createElement("iframe");
                                  (a.style.cssText = "display:none"),
                                  (a.name = "__tcfapiLocator"),
                                  r.body.appendChild(a);
                              } else setTimeout(e, 5);
                          return !t;
                      })() &&
                      ((n.__tcfapi = function(n, r, a, o) {
                              var i = [n, r, a, o];
                              if (!i.length) return t;
                              if ("setGdprApplies" === i[0])
                                  i.length > 3 &&
                                  2 === parseInt(i[1], 10) &&
                                  "boolean" == typeof i[3] &&
                                  ((e = i[3]),
                                      "function" == typeof i[2] && i[2]("set", !0));
                              else if ("ping" === i[0]) {
                                  var c = {
                                      gdprApplies: e,
                                      cmpLoaded: !1,
                                      apiVersion: "2.0",
                                  };
                                  "function" == typeof i[2] && i[2](c, !0);
                              } else t.push(i);
                          }),
                          (n.__tcfapi.commandQueue = t),
                          (n.__tcfapi.start = a),
                          n.addEventListener(
                              "message",
                              function(e) {
                                  var t = "string" == typeof e.data,
                                      r = {};
                                  try {
                                      r = t ? JSON.parse(e.data) : e.data;
                                  } catch (e) {}
                                  var a = r.__tcfapiCall;
                                  a &&
                                      n.__tcfapi(
                                          a.command,
                                          a.version,
                                          function(n, r) {
                                              if (e.source) {
                                                  var o = {
                                                      __tcfapiReturn: {
                                                          returnValue: n,
                                                          success: r,
                                                          callId: a.callId,
                                                          command: a.command,
                                                      },
                                                  };
                                                  t && (o = JSON.stringify(o)),
                                                      e.source.postMessage(o, "*");
                                              }
                                          },
                                          a.parameter
                                      );
                              },
                              !1
                          ));
              }
          })();
      },
  });
  </script>
  <script async src="https://gdpr-wrapper.privacymanager.io/gdpr/f262d89c-6779-465c-84e2-1631009d76bb/gdpr-liveramp.js"></script>

  <script>
  (function(){
    jQuery(document).on('click', '#messages li p', function(){
        jQuery(this).parent().find('pre').slideToggle();
    });
    var $messages = jQuery('#messages');
    var ping_check = function(){
      window.__tcfapi('ping', 2, function(pingData){
        $messages.append('<li><p>__tcfapi("ping") response</p> <pre>' + JSON.stringify({pingData:pingData}, null, 4) + '</pre></li>');
      });
    };
    ping_check();
    window.__tcfapi('addEventListener', 2, function(tcfData, success){
      $messages.append('<li><p>__tcfapi("addEventListener") response</p> <pre>' + JSON.stringify({tcfData:tcfData, success:success}, null, 4) + '</pre></li>');
      ping_check();
    });
  })()
  </script>
</body>
</html>
